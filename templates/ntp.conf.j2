# {{ ansible_managed }}

# You should not need to modify the following path.
driftfile /var/lib/ntp/ntp.drift

# Warning: Using default NTP settings will leave your NTP
# server accessible to all hosts on the Internet.

{%- if ntp_restrict_defaults %}
# Deny other machines from changing the configuration but allow localhost:
restrict default nomodify nopeer
restrict 127.0.0.1
restrict ::1
{% endif %}

# To allow machines within your network to synchronize
# their clocks with your server, but ensure they are
# not allowed to configure the server or used as peers
# to synchronize against, uncomment this line.
#
{% for item in ntp_allow_access_from %}
restrict {{ ' mask '.join(item.split(' ')) if item.count(' ') == 1 else item }} nomodify nopeer notrap
{% else %}
#restrict 192.168.0.0 mask 255.255.255.0 nomodify nopeer notrap
{% endfor %}

# Name of the servers ntpd should sync with. A good way to get servers
# for your machine is: netselect -s 3 pool.ntp.org
# Please respect the access policy as stated by the responsible person.
#
{% for item in ntp_servers %}
server {{ item }}
{% else %}
#server 0.gentoo.pool.ntp.org
{% endfor %}

# Include configuration generated by DHCP client.
includefile /etc/ntp.conf.dhcp
